<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de bord client - DEANNA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            --color-primary: #0B1C2A;
            --color-accent: #CFAF70;
            --color-bg-light: #FAF9F6;
            --color-text: #2C2C2C;
            --color-text-secondary: #6C6C6C;
            --color-border: #1A3B57;
            --color-error: #800020;
        }

        .bg-color-primary { background-color: var(--color-primary); }
        .text-color-primary { color: var(--color-primary); }
        .bg-color-accent { background-color: var(--color-accent); }
        .text-color-accent { color: var(--color-accent); }
        .bg-color-bg-light { background-color: var(--color-bg-light); }
        .text-color-bg-light { color: var(--color-bg-light); }
        .text-color-text { color: var(--color-text); }
        .text-color-text-secondary { color: var(--color-text-secondary); }
        .border-color-border { border-color: var(--color-border); }
        
        .dashboard-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .stat-card {
            background: linear-gradient(135deg, var(--color-primary) 0%, #1a3b57 100%);
            color: white;
        }
    </style>
</head>

<body class="bg-color-bg-light min-h-screen flex flex-col">
    <!-- Barre de navigation -->
    <header class="bg-white shadow-md py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-color-primary">
                <a href="{% url 'index' %}" class="flex items-center space-x-2">
                    <svg class="h-8 w-8 text-color-accent" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 6.94C3 5.42 4.09 4.19 5.58 4.04L19.58 2.04C20.47 1.91 21.32 2.51 21.45 3.4L21.99 7.03C22.28 8.92 20.89 10.58 19 10.92L6.34 13.06C5.06 13.28 4.01 12.27 4.01 10.98V6.94H3ZM20.94 14.58L10.94 16.27C9.37 16.54 8.01 18 8.01 19.66V20.73C8.01 21.43 8.57 22.02 9.28 22.02H18.72C19.43 22.02 19.99 21.43 19.99 20.73V15.77C19.99 15.19 20.48 14.71 21.05 14.82C21.6 14.93 22 15.42 22 15.98V20.73C22 22.58 20.57 24 18.72 24H9.28C7.43 24 6 22.58 6 20.73V19.66C6 17.15 7.82 15.02 10.29 14.61L20.29 12.92C21.57 12.7 22.62 13.71 22.62 15V19.14L21.45 14.58H20.94Z" fill="currentColor" />
                    </svg>
                    <span>DEANNA</span>
                </a>
            </h1>
            <nav class="flex space-x-4 items-center">
                <a href="{% url 'index' %}" class="text-color-text-secondary hover:text-color-primary transition-colors">Accueil</a>
                <a href="{% url 'product_list' %}" class="text-color-text-secondary hover:text-color-primary transition-colors">Produits</a>
                <a href="{% url 'client_dashboard' %}" class="text-color-primary font-semibold">Mon compte</a>
                <a href="{% url 'logout_view' %}" class="text-color-text-secondary hover:text-color-primary transition-colors">Déconnexion</a>
                <a href="{% url 'cart_detail' %}" class="text-color-text-secondary hover:text-color-primary transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.76.707 1.76H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                </a>
            </nav>
        </div>
    </header>

    <!-- Contenu principal -->
    <main class="flex-grow container mx-auto px-4 py-8">
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-color-primary">Tableau de bord</h1>
            <p class="text-color-text-secondary">Bienvenue, {{ client.first_name }} {{ client.last_name }}</p>
        </div>

        <!-- Cartes de statistiques -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="stat-card rounded-xl p-6 text-center">
                <div class="text-3xl font-bold mb-2">{{ recent_orders|length }}</div>
                <div class="text-sm uppercase">Commandes récentes</div>
            </div>
            
            <div class="bg-white rounded-xl p-6 shadow-md text-center dashboard-card">
                <div class="text-3xl font-bold text-color-primary mb-2">0</div>
                <div class="text-sm text-color-text-secondary uppercase">Avis laissés</div>
            </div>
            
            <div class="bg-white rounded-xl p-6 shadow-md text-center dashboard-card">
                <div class="text-3xl font-bold text-color-primary mb-2">0</div>
                <div class="text-sm text-color-text-secondary uppercase">Produits favoris</div>
            </div>
        </div>

        <!-- Commandes récentes -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-8">
            <h2 class="text-2xl font-bold text-color-primary mb-4">Commandes récentes</h2>
            
            {% if recent_orders %}
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-color-text-secondary uppercase tracking-wider">Commande</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-color-text-secondary uppercase tracking-wider">Date</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-color-text-secondary uppercase tracking-wider">Total</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-color-text-secondary uppercase tracking-wider">Statut</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-color-text-secondary uppercase tracking-wider">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        {% for order in recent_orders %}
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-color-primary">#{{ order.id }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-color-text-secondary">{{ order.date_ordered|date:"d/m/Y" }}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-color-text-secondary">{{ order.get_cart_total }} CFA</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                    Complétée
                                </span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <a href="{% url 'client_order_detail' order.id %}" class="text-color-accent hover:text-color-primary">Voir détails</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <p class="text-color-text-secondary">Vous n'avez pas encore passé de commande.</p>
            <a href="{% url 'product_list' %}" class="inline-block mt-4 bg-color-accent text-color-primary font-bold py-2 px-4 rounded-full hover:opacity-80 transition-opacity">
                Découvrir nos produits
            </a>
            {% endif %}
        </div>

        <!-- Actions rapides -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white rounded-xl shadow-md p-6 dashboard-card">
                <h3 class="text-xl font-bold text-color-primary mb-4">Mon profil</h3>
                <p class="text-color-text-secondary mb-4">Gérez vos informations personnelles et vos préférences.</p>
                <button class="bg-gray-200 text-color-text font-bold py-2 px-4 rounded-full hover:bg-gray-300 transition-colors">
                    Modifier le profil
                </button>
            </div>
            
            <div class="bg-white rounded-xl shadow-md p-6 dashboard-card">
                <h3 class="text-xl font-bold text-color-primary mb-4">Mes adresses</h3>
                <p class="text-color-text-secondary mb-4">Ajoutez ou modifiez vos adresses de livraison.</p>
                <button class="bg-gray-200 text-color-text font-bold py-2 px-4 rounded-full hover:bg-gray-300 transition-colors">
                    Gérer les adresses
                </button>
            </div>
        </div>
    </main>

    <!-- Pied de page -->
    <footer class="bg-color-primary text-color-bg-light py-10 mt-8">
        <div class="container mx-auto px-4 text-center">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="#" class="text-color-text-secondary hover:text-color-bg-light transition-colors">À propos</a>
                <a href="#" class="text-color-text-secondary hover:text-color-bg-light transition-colors">Contact</a>
                <a href="#" class="text-color-text-secondary hover:text-color-bg-light transition-colors">Politique de confidentialité</a>
            </div>
            <p class="text-gray-500 text-sm">&copy; 2024 DEANNA E-commerce. Tous droits réservés.</p>
        </div>
    </footer>
</body>

</html>